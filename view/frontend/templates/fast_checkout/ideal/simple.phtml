<?php
declare(strict_types=1);

/** @version 2.0.15 */

use Magento\Framework\Escaper;
use Magento\Framework\View\Element\Template;
use LokiCheckout\PayNl\ViewModel\IdealFastCheckout;
use Loki\Components\Factory\ViewModelFactory;
use Loki\Components\Util\Block\ImageRenderer;

/** @var Escaper $escaper */
/** @var Template $block */
/** @var ViewModelFactory $viewModelFactory */
/** @var IdealFastCheckout $idealFastCheckout */

$idealFastCheckout = $viewModelFactory->create(IdealFastCheckout::class);
$shippingAddress = $idealFastCheckout->getShippingAddress();

?>
<form action="/paynl/checkout/fastcheckoutstart" method="post" x-data="LokiForm">
    <input type="hidden" value="<?= $escaper->escapeHtml($shippingAddress->getCountryId()) ?>" name="selected_estimate_country"/>
    <input type="hidden" value="<?= $escaper->escapeHtml($shippingAddress->getPostcode()) ?>" name="selected_estimate_zip"/>
    <a @click.prevent="submit" title="Fast Checkout"
       class="<?= $escaper->escapeHtmlAttr($css('cursor-pointer rounded-md p-4 bg-[#c90066] text-white flex', 'anchor')) ?>">
        <?= /* @noEscape */ $imageRenderer->get('Paynl_Payment::images/fastCheckoutIdeal.png') ?>
        <span class="<?= $escaper->escapeHtmlAttr($css('pt-4', 'anchor-span')) ?>"><?= $escaper->escapeHtml(__('Fast Checkout')) ?></span>
    </a>

    <?php echo /* @noEscape */ $block->getBlockHtml('formkey') ?>
</form>
