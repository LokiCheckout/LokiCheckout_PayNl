<?php
declare(strict_types=1);

/** @version 2.0.19 */

use Magento\Framework\Escaper;
use Magento\Framework\View\Element\Template;
use LokiCheckout\PayNl\ViewModel\IdealFastCheckout;
use Loki\Components\Factory\ViewModelFactory;
use Loki\Components\Util\Block\ImageRenderer;

/** @var Escaper $escaper */
/** @var Template $block */
/** @var ViewModelFactory $viewModelFactory */
/** @var IdealFastCheckout $idealFastCheckout */
/** @var ImageRenderer $imageRenderer */

$idealFastCheckout = $viewModelFactory->create(IdealFastCheckout::class);
$shippingAddress = $idealFastCheckout->getShippingAddress();

?>
<form action="/paynl/checkout/fastcheckoutstart" method="post" x-data="LokiForm">
    <input type="hidden" value="<?= $escaper->escapeHtml($shippingAddress->getCountryId()) ?>" name="selected_estimate_country"/>
    <input type="hidden" value="<?= $escaper->escapeHtml($shippingAddress->getPostcode()) ?>" name="selected_estimate_zip"/>

    <button
        type="button"
        @click="submit"
        class="<?= $escaper->escapeHtml($css('btn inline-flex items-center gap-4 bg-white hover:bg-gray-100 active:bg-gray-200 text-gray-950 rounded-lg', 'button')) ?>"
    >
        <?= $escaper->escapeHtml(__('Checkout with')) ?>
        <?= /* @noEscape */ $imageRenderer->get(
            'LokiCheckout_PayNl::images/ideal.svg',
            [
                'aria-label' => 'iDEAL',
                'width' => '48',
                'height' => '48'
            ]
        ) ?>
    </button>

    <?php echo /* @noEscape */ $block->getBlockHtml('formkey') ?>
</form>
