<?php
declare(strict_types=1);

use Magento\Framework\View\Element\Template;
use Yireo\LokiCheckoutPayNl\ViewModel\IdealFastCheckout;
use Yireo\LokiComponents\Factory\ViewModelFactory;
use Yireo\LokiFieldComponents\ViewModel\ImageOutput;

/** @var Template $block */
/** @var ViewModelFactory $viewModelFactory */
/** @var IdealFastCheckout $idealFastCheckout */

$idealFastCheckout = $viewModelFactory->create(IdealFastCheckout::class);
$shippingAddress = $idealFastCheckout->getShippingAddress();
$imageOutput = $viewModelFactory->create(ImageOutput::class);
?>
<form action="/paynl/checkout/fastcheckoutstart" method="post" x-data="LokiForm">
    <input type="hidden" value="<?= $shippingAddress->getCountryId() ?>" name="selected_estimate_country"/>
    <input type="hidden" value="<?= $shippingAddress->getPostcode() ?>" name="selected_estimate_zip"/>
    <a @click="submit" title="Fast Checkout"
       class="cursor-pointer rounded-md p-4 bg-[#c90066] text-white flex">
        <?= $imageOutput->get('Paynl_Payment::images/fastCheckoutIdeal.png') ?>
        <span class="pt-4"><?= __('Fast Checkout') ?></span>
    </a>

    <?php echo $block->getBlockHtml('formkey') ?>
</form>
